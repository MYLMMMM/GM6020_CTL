# gm6020_ctl

这个程序准备是用来在鲁班猫上控制GM6020而写的，主要目的是为了验证各种控制算法。以及提供接口给其他程序使用。

# 程序设计

## can接口模块

这个模块封装了linux下can接口的操作，将can接口封装为can类供其他程序调用。

支持操作：
- 发送can帧
- 接受can帧
- 绑定can套接字
(待完成)

## CLI操作模块

这个模块封装了CLI交互界面，通过命令调用库函数功能，并且显示电机状态

- 命令读取
- 多电机支持
- 设置速度，位置.....（调用motor库支持函数）

## 电机控制模块

### 消息解析和数据读取

- 解析接受到的can消息，获取电机状态
- 打包计算好的输出角度，发送can消息

### 电机算法

调用easyalth进行控制算法的设计

### 电机控制

- 角度设置
- 位置设置
- 力矩设置

哈哈，其实上面这些东西全是未完成。

## 程序结构

- 主进程：初始化各模块，启动CLI线程
- CLI进程：读取并修改相关配置，创建can监听进程并显示消息，创建电机线程并将其can消息队列绑定到can接口，
- can消息进程：读取can消息，投递消息到相关队列。实现电机在线检测并维护列表。

# 项目日志

2025.10.14 大概立了项。。。扒来一个can的x程序和一个测试用例，之后仿造这玩意重写它。先写了6020但是最后决定先写motor再继承，毕竟那么多电机,删了明天重写。
2025.10.15 写了PID,写了GM6020但没写完，cmake文档也改了一下，方便加入头文件。
2025.10.16 摸鱼。。。写了一点点。
2025.10.20 完善了数据，写了can解包，封包，初步点了下pid控制器，明天补全控制器触发链。原本准备加入前馈控制内容，但是想要做出可用而优雅的前馈控制模板类还有点难，有一些c++的语法还需要学习。还初步找了个ncurse的clih示例程序，camkex编译了一下在test里面，准备之后就用cli做程序面板，然后使用虚拟串口输出到vofa里面做绘图，联合调参。当然电机控制肯定是能够单独运行的。